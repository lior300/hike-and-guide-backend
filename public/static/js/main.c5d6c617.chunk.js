(this.webpackJsonphike_n_guide=this.webpackJsonphike_n_guide||[]).push([[0],{20:function(e,a,t){e.exports=t.p+"static/media/star.5adbb10a.svg"},21:function(e,a,t){e.exports=t.p+"static/media/\u200f\u200fstar-o.84a0002b.svg"},48:function(e,a,t){e.exports=t.p+"static/media/logo.b949dc32.svg"},52:function(e,a,t){e.exports=t(99)},57:function(e,a,t){},62:function(e,a,t){},99:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(24),s=t.n(i),l=(t(57),t(12)),o=t(10),c=(t(62),t(2)),u=t(5),m=t(6),d=t(8),p=t(7),v=t(11),h=t(3),g=t.n(h),f=t(4),b=t(47),N=t.n(b),E=t(15),w=Object(E.a)(),y=N.a.create({withCredentials:!0}),k=function(e,a){return C(e,"GET",a)},O=function(e,a){return C(e,"POST",a)},j=function(e,a){return C(e,"PUT",a)},S=function(e,a){return C(e,"DELETE",a)};function C(e){return T.apply(this,arguments)}function T(){return(T=Object(f.a)(g.a.mark((function e(a){var t,n,r,i=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"get",n=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,y({url:"".concat("/api/").concat(a),method:t,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(a,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&w.push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var x={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=k("user",e);return a},save:function(e){if(e._id)return j("".concat("user","/").concat(e._id),e);return O("".concat("user"),e)},remove:function(e){return S("".concat("user","/").concat(e))},getById:function(e){return k("".concat("user","/").concat(e))},getMiniUserObj:function(e){var a=e._id,t=e.userName,n=e.fullName,r=e.imgUrl,i=e.isAdmin;return{_id:a,userName:t,fullName:n,imgUrl:r,isAdmin:i}}};var I={login:function(e){return D.apply(this,arguments)},signup:function(e){return _.apply(this,arguments)},logout:function(){return A.apply(this,arguments)}};function D(){return(D=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/login",a);case 2:return t=e.sent,e.abrupt("return",U(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/signup",a);case 2:return t=e.sent,e.abrupt("return",U(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return e=x.getMiniUserObj(e),sessionStorage.setItem("user",JSON.stringify(e)),e}function M(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"LOADING_START"}),a.next=4,x.query(e);case 4:n=a.sent,t(R(n)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("UserActions: err in loadUsers",a.t0);case 11:return a.prev=11,t({type:"LOADING_DONE"}),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})));return function(e){return a.apply(this,arguments)}}()}function L(e){return{type:"SET_USER",user:e}}function R(e){return{type:"SET_USERS",users:e}}var F=t(48),H=t.n(F),B=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={headerColorClass:"",menuActiveClass:"",navOpenedClass:""},e.setHeaderColor=function(){"/"===w.location.pathname?(e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{headerColorClass:""})})),window.addEventListener("scroll",e.handleScroll)):(window.removeEventListener("scroll",e.handleScroll),e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{headerColorClass:"header-colored"})})))},e.handleScroll=function(){window.pageYOffset>50?e.state.headerColorClass||e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{headerColorClass:"header-colored"})})):e.state.headerColorClass&&e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{headerColorClass:""})}))},e.toggleMenu=function(){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{menuActiveClass:"is-active"===e.menuActiveClass?"":"is-active",navOpenedClass:"opened"===e.navOpenedClass?"":"opened"})}))},e.handleLoginClick=function(){w.push("/login")},e.handleLogoutClick=function(){e.props.logout(),e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{loggedInUser:null})}))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.props.loggedInUser;return r.a.createElement("header",{className:"main-header ".concat(this.state.headerColorClass)},r.a.createElement(v.a,{className:"main-header-home-link",to:"/",onClick:function(){w.push("/")}},r.a.createElement("img",{src:H.a,alt:"HIKE&GUIDE",className:"main-header-logo"})),r.a.createElement("nav",{className:"main-header-nav ".concat(this.state.navOpenedClass),onClick:function(){return e.toggleMenu()}},r.a.createElement(v.b,{exact:!0,className:"main-header-link",to:"/",activeClassName:"selected"},"Home"),r.a.createElement(v.b,{className:"main-header-link",to:"/trail",activeClassName:"selected"},"Trails"),r.a.createElement(v.b,{className:"main-header-link",to:"/guide",activeClassName:"selected"},"Guides"),r.a.createElement("div",{className:"main-header-link",onClick:a?this.handleLogoutClick:this.handleLoginClick},a?"Logout":"Login"),a&&r.a.createElement(v.b,{to:"/profile/".concat(a._id),className:"main-header-link",activeClassName:"selected"},r.a.createElement("img",{src:a.imgUrl,alt:a.fullName,className:"user-profile-link-image"}))),r.a.createElement("button",{className:"hamburger hamburger--spin ".concat(this.state.menuActiveClass),type:"button",onClick:function(){return e.toggleMenu()}},r.a.createElement("span",{className:"hamburger-box"},r.a.createElement("span",{className:"hamburger-inner"}))))}}]),t}(r.a.Component),G={logout:function(){return function(){var e=Object(f.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.logout();case 2:a(L(null));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}},K=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),G)(B),W=function(){var e=(new Date).getFullYear(),a=2020===e?"2020":"2020-".concat(e);return r.a.createElement("footer",{className:"main-footer"},r.a.createElement("p",{className:"main-footer-text"},r.a.createElement("span",null,"\xa9 ",a," "),r.a.createElement("a",{className:"main-footer-link",href:"https://github.com/nguyaniv/Hike_N_Guide/graphs/contributors",target:"_blank",rel:"noopener noreferrer"},"Hike & Guide contributors.")))},P=t(19),z=t(20),q=t.n(z),V=t(21),Y=t.n(V),J=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={_id:"",name:"",country:"",rating:0,imgUrls:[]},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState(this.props.trail)}},{key:"render",value:function(){var e=this.state,a=e._id,t=e.name,n=e.country,i=e.difficulty,s=e.days,l=e.distance,o=e.rating,c=e.imgUrls;return r.a.createElement("article",{className:"trail-preview"},r.a.createElement(v.a,{to:"/trail/".concat(a)},r.a.createElement("img",{className:"trail-preview-image",src:c[0],alt:t}),r.a.createElement("div",{className:"trail-preview-info"},r.a.createElement("div",{className:"trail-preview-main-info"},r.a.createElement("span",{className:"trail-preview-name"},t),r.a.createElement(P.a,{className:"trail-preview-rating",start:0,stop:5,initialRating:o,emptySymbol:r.a.createElement("img",{className:"trail-preview-full-star",src:q.a,alt:"star"}),fullSymbol:r.a.createElement("img",{className:"trail-preview-star",src:Y.a,alt:"full-star"}),readonly:!0})),r.a.createElement("p",{className:"trail-preview-row"},r.a.createElement("span",{className:"trail-preview-heading"},"Country: "),n),r.a.createElement("p",{className:"trail-preview-row"},r.a.createElement("span",{className:"trail-preview-heading"},"Difficulty: "),i),r.a.createElement("p",{className:"trail-preview-row"},r.a.createElement("span",{className:"trail-preview-heading"},"Days: "),s),r.a.createElement("p",{className:"trail-preview-row"},r.a.createElement("span",{className:"trail-preview-heading"},"Distance: "),l))))}}]),t}(r.a.Component),X=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={_id:"",fullName:"",rating:0,languages:[],trails:[],imgUrl:""},e.handleRatingChangerate=function(a){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{rating:a})}))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState(this.props.guide)}},{key:"getLangsToShow",value:function(){var e={en:"English",he:"Hebrew",ru:"Russian"};return this.state.languages.map((function(a){return"".concat(e[a])||a})).join(", ")}},{key:"getTrailsToShow",value:function(){if(this.state.trails)return this.state.trails.map((function(e){return"".concat(e.name)})).join(", ")}},{key:"render",value:function(){var e=this.state,a=e._id,t=e.fullName,n=e.rating,i=e.imgUrl;return r.a.createElement("article",{className:"guide-preview"},r.a.createElement(v.a,{to:"/booking/".concat(a)},r.a.createElement("img",{className:"guide-preview-image square-ratio",src:i,alt:t}),r.a.createElement("div",{className:"guide-preview-info"},r.a.createElement("div",{className:"guide-preview-main-info"},r.a.createElement("span",{className:"guide-preview-name"},t),r.a.createElement(P.a,{start:0,stop:5,initialRating:n,emptySymbol:r.a.createElement("img",{className:"guide-preview-full-star",src:q.a,alt:"star"}),fullSymbol:r.a.createElement("img",{className:"guide-preview-star",src:Y.a,alt:"full-star"}),readonly:!0})),r.a.createElement("p",{className:"guide-preview-languages"},r.a.createElement("span",{className:"guide-preview-heading"},"Languages:\xa0"),this.getLangsToShow()),r.a.createElement("p",{className:"guide-preview-trails"},r.a.createElement("span",{className:"guide-preview-heading"},"Trails:\xa0"),this.getTrailsToShow()))))}}]),t}(r.a.Component),$=function(e){return r.a.createElement("div",{className:"preview-list"},e.items.map((function(e){return e.location?r.a.createElement(J,{key:e._id,trail:e}):e.userName?r.a.createElement(X,{key:e._id,guide:e}):""})))},Z={query:function(){return k("trail")},getById:function(e){return k("".concat("trail","/").concat(e))},remove:function(e){return S("".concat("trail","/").concat(e))},add:function(e){return Q.apply(this,arguments)},edit:function(e){return ee.apply(this,arguments)},getMiniTrailObj:function(e){var a=e._id,t=e.name;return{_id:a,name:t}}};function Q(){return(Q=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("trail",a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.isEditMode=!1,e.next=3,j("".concat("trail","/").concat(a._id),a);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return function(){var e=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.query();case 3:t=e.sent,a(te(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ReviewActions: err in loadTrails",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()}function te(e){return{type:"SET_TRAILS",trails:e}}function ne(e){return{type:"DELETE",trailId:e}}var re=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.loadTrails(),this.props.loadUsers()}},{key:"render",value:function(){var e=this.props,a=e.trails,t=e.users.filter((function(e){return e.trails})).sort((function(e,a){return a.rating-e.rating})).slice(0,8),n=a.sort((function(e,a){return a.rating-e.rating})).slice(0,6);return r.a.createElement("main",{className:"homepage"},r.a.createElement("div",{className:"homepage-header"},r.a.createElement("h2",{className:"homepage-main-heading"},"Find hiking trails and guides worldwide")),r.a.createElement("h2",{className:"homepage-list-heading"},"Popular Trails"),r.a.createElement($,{items:n}),r.a.createElement(v.a,{to:"/trail",style:{textDecoration:"none"}},r.a.createElement("button",{className:"homepage-show-more-button"},"Show all")),r.a.createElement("h2",{className:"homepage-list-heading"},"Popular Guides"),r.a.createElement($,{items:t}),r.a.createElement(v.a,{to:"/guide",style:{textDecoration:"none"}},r.a.createElement("button",{className:"homepage-show-more-button"},"Show all")))}}]),t}(n.Component),ie={loadTrails:ae,loadUsers:M},se=Object(o.b)((function(e){return{trails:e.trail.trails,users:e.user.users}}),ie)(re),le=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.loadTrails()}},{key:"render",value:function(){var e=this.props.trails;return r.a.createElement("main",{className:"trail-page"},this.props.trails&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"trail-page-main-heading"},"Choose your trail"),r.a.createElement(r.a.Fragment,null),r.a.createElement("section",null),r.a.createElement($,{items:e})))}}]),t}(n.Component),oe={loadTrails:ae},ce=Object(o.b)((function(e){return{trails:e.trail.trails}}),oe)(le),ue=t(13),me={ab:{name:"Abkhaz",nativeName:"\u0430\u04a7\u0441\u0443\u0430"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"\u12a0\u121b\u122d\u129b"},ar:{name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},an:{name:"Aragonese",nativeName:"Aragon\xe9s"},hy:{name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},as:{name:"Assamese",nativeName:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be"},av:{name:"Avaric",nativeName:"\u0430\u0432\u0430\u0440 \u043c\u0430\u0446\u04c0, \u043c\u0430\u0433\u04c0\u0430\u0440\u0443\u043b \u043c\u0430\u0446\u04c0"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"\u0431\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"},bn:{name:"Bengali",nativeName:"\u09ac\u09be\u0982\u09b2\u09be"},bh:{name:"Bihari",nativeName:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a"},my:{name:"Burmese",nativeName:"\u1017\u1019\u102c\u1005\u102c"},ca:{name:"Catalan; Valencian",nativeName:"Catal\xe0"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiChe\u0175a, chinyanja"},zh:{name:"Chinese",nativeName:"\u4e2d\u6587 (Zh\u014dngw\xe9n), \u6c49\u8bed, \u6f22\u8a9e"},cv:{name:"Chuvash",nativeName:"\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"\u010desky, \u010de\u0161tina"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"\u078b\u07a8\u0788\u07ac\u0780\u07a8"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"E\u028begbe"},fo:{name:"Faroese",nativeName:"f\xf8royskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"fran\xe7ais, langue fran\xe7aise"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},gn:{name:"Guaran\xed",nativeName:"Ava\xf1e\u1ebd"},gu:{name:"Gujarati",nativeName:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"},ht:{name:"Haitian; Haitian Creole",nativeName:"Krey\xf2l ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, \u0647\u064e\u0648\u064f\u0633\u064e"},he:{name:"Hebrew",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940, \u0939\u093f\u0902\u0926\u0940"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"As\u1ee5s\u1ee5 Igbo"},ik:{name:"Inupiaq",nativeName:"I\xf1upiaq, I\xf1upiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"\xcdslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"\u1403\u14c4\u1483\u144e\u1450\u1466"},ja:{name:"Japanese",nativeName:"\u65e5\u672c\u8a9e (\u306b\u307b\u3093\u3054\uff0f\u306b\u3063\u307d\u3093\u3054)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"\u0915\u0936\u094d\u092e\u0940\u0930\u0940, \u0643\u0634\u0645\u064a\u0631\u064a\u200e"},kk:{name:"Kazakh",nativeName:"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},km:{name:"Khmer",nativeName:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"},ki:{name:"Kikuyu, Gikuyu",nativeName:"G\u0129k\u0169y\u0169"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"\u043a\u044b\u0440\u0433\u044b\u0437 \u0442\u0438\u043b\u0438"},kv:{name:"Komi",nativeName:"\u043a\u043e\u043c\u0438 \u043a\u044b\u0432"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"\ud55c\uad6d\uc5b4 (\u97d3\u570b\u8a9e), \uc870\uc120\ub9d0 (\u671d\u9bae\u8a9e)"},ku:{name:"Kurdish",nativeName:"Kurd\xee, \u0643\u0648\u0631\u062f\u06cc\u200e"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"L\xebtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Ling\xe1la"},lo:{name:"Lao",nativeName:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7"},lt:{name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latvie\u0161u valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, \u0628\u0647\u0627\u0633 \u0645\u0644\u0627\u064a\u0648\u200e"},ml:{name:"Malayalam",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"M\u0101ori",nativeName:"te reo M\u0101ori"},mr:{name:"Marathi (Mar\u0101\u1e6dh\u012b)",nativeName:"\u092e\u0930\u093e\u0920\u0940"},mh:{name:"Marshallese",nativeName:"Kajin M\u0327aje\u013c"},mn:{name:"Mongolian",nativeName:"\u043c\u043e\u043d\u0433\u043e\u043b"},na:{name:"Nauru",nativeName:"Ekakair\u0169 Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Din\xe9 bizaad, Din\xe9k\u02bceh\u01f0\xed"},nb:{name:"Norwegian Bokm\xe5l",nativeName:"Norsk bokm\xe5l"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"\u0928\u0947\u092a\u093e\u0932\u0940"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"\ua188\ua320\ua4bf Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0"},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"\u0469\u0437\u044b\u043a\u044a \u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"\u0b13\u0b21\u0b3c\u0b3f\u0b06"},os:{name:"Ossetian, Ossetic",nativeName:"\u0438\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433"},pa:{name:"Panjabi, Punjabi",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40, \u067e\u0646\u062c\u0627\u0628\u06cc\u200e"},pi:{name:"P\u0101li",nativeName:"\u092a\u093e\u0934\u093f"},fa:{name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06cc"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:"\u067e\u069a\u062a\u0648"},pt:{name:"Portuguese",nativeName:"Portugu\xeas"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"rom\xe2n\u0103"},ru:{name:"Russian",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},sa:{name:"Sanskrit (Sa\u1e41sk\u1e5bta)",nativeName:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"\u0938\u093f\u0928\u094d\u0927\u0940, \u0633\u0646\u068c\u064a\u060c \u0633\u0646\u062f\u06be\u06cc\u200e"},se:{name:"Northern Sami",nativeName:"Davvis\xe1megiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"y\xe2ng\xe2 t\xee s\xe4ng\xf6"},sr:{name:"Serbian",nativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"G\xe0idhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},sk:{name:"Slovak",nativeName:"sloven\u010dina"},sl:{name:"Slovene",nativeName:"sloven\u0161\u010dina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"espa\xf1ol, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},te:{name:"Telugu",nativeName:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},tg:{name:"Tajik",nativeName:"\u0442\u043e\u04b7\u0438\u043a\u04e3, to\u011fik\u012b, \u062a\u0627\u062c\u06cc\u06a9\u06cc\u200e"},th:{name:"Thai",nativeName:"\u0e44\u0e17\u0e22"},ti:{name:"Tigrinya",nativeName:"\u1275\u130d\u122d\u129b"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42"},tk:{name:"Turkmen",nativeName:"T\xfcrkmen, \u0422\u04af\u0440\u043a\u043c\u0435\u043d"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, \u170f\u1712\u1703\u1705\u1714 \u1706\u1704\u170e\u1713\u1704\u1714"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"T\xfcrk\xe7e"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"\u0442\u0430\u0442\u0430\u0440\u0447\u0430, tatar\xe7a, \u062a\u0627\u062a\u0627\u0631\u0686\u0627\u200e"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uy\u01a3urq\u0259, \u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5\u200e"},uk:{name:"Ukrainian",nativeName:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},ur:{name:"Urdu",nativeName:"\u0627\u0631\u062f\u0648"},uz:{name:"Uzbek",nativeName:"zbek, \u040e\u0437\u0431\u0435\u043a, \u0623\u06c7\u0632\u0628\u06d0\u0643\u200e"},ve:{name:"Venda",nativeName:"Tshiven\u1e13a"},vi:{name:"Vietnamese",nativeName:"Ti\u1ebfng Vi\u1ec7t"},vo:{name:"Volap\xfck",nativeName:"Volap\xfck"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9"},yo:{name:"Yoruba",nativeName:"Yor\xf9b\xe1"},za:{name:"Zhuang, Chuang",nativeName:"Sa\u026f cue\u014b\u0185, Saw cuengh"}};function de(e){return me[e].name}var pe={query:function(){return ve.apply(this,arguments)},getById:function(e){return k("review/".concat(e))},remove:function(e){return S("review/".concat(e))},add:function(e){return he.apply(this,arguments)},edit:function(e){return ge.apply(this,arguments)}};function ve(){return(ve=Object(f.a)(g.a.mark((function e(){var a,t,n=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:null,e.next=3,k("review");case 3:if(t=e.sent,a){e.next=6;break}return e.abrupt("return",t);case 6:return e.abrupt("return",t.filter((function(e){return e.type.guide?e.type.guide._id===a.guideId:e.type.trail._id===a.trailId})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.at=Date.now(),e.next=3,O("review",a);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),a.isEditMode=!1,e.next=4,j("review/".concat(a._id),a);case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return function(){var e=Object(f.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.query();case 3:return t=e.sent,a(be(t)),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.log("ReviewActions: err in loadReviews",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()}function be(e){return{type:"SET_REVIEWS",review:e}}function Ne(e){return{type:"DELETE",reviewId:e}}function Ee(e){return{type:"ADD",review:e}}var we=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={rate:5,by:{},txt:"",type:{},title:"",editMode:!1},e.handledChange=function(a){var t=a.target,n=t.name,r=t.value;e.setState(Object(ue.a)({},n,r))},e.onSend=function(a){a.preventDefault();var t=e.state;console.log("review was sent from ReviewAdd page: ",t),e.props.saveReview(t).then((function(){e.props.getReviewToShow()}))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){if(this.props.guide){var e=this.props.user,a={_id:e._id,fullName:e.fullName},t=this.props.guide,n=t._id,r={guide:{fullName:t.fullName,_id:n}};this.setState({by:a,type:r})}if(this.props.trail){var i=this.props.user,s={_id:i._id,fullName:i.fullName},l=this.props.trail,o={trail:{_id:l._id,name:l.name}};this.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{by:s,type:o})}),(function(){}))}}},{key:"render",value:function(){var e=this,a=this.state,t=a.rate,n=a.txt,i=a.title,s=this.props.user;return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("section",{className:"review-add"},r.a.createElement("div",{className:"review-add-rate-container"},r.a.createElement("span",{className:"review-add-rate-label"},"Rate:"),r.a.createElement(P.a,{start:0,stop:5,initialRating:t,emptySymbol:r.a.createElement("img",{src:q.a,alt:"star",className:"img-star"}),fullSymbol:r.a.createElement("img",{src:Y.a,alt:"full-star",className:"img-star"}),onChange:function(a){e.setState({rate:a})}})),r.a.createElement("form",{className:"review-add-form",onSubmit:this.onSend},r.a.createElement("label",{htmlFor:"title"},"Review title:"),r.a.createElement("input",{className:"review-add-title",type:"text",id:"title",name:"title",value:i,onChange:this.handledChange}),r.a.createElement("label",{htmlFor:"text"},"Review text:"),r.a.createElement("textarea",{className:"review-add-textarea",id:"text",name:"txt",value:n,onChange:this.handledChange,cols:"30",rows:"10",placeholder:"What do you think about me?",required:!0}),r.a.createElement("button",{className:"review-add-submit-btn"},"Send"))))}}]),t}(n.Component),ye={saveReview:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,pe.add(e);case 3:return n=a.sent,a.abrupt("return",t(Ee(n)));case 7:a.prev=7,a.t0=a.catch(0),console.log("error",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},loadReviews:fe},ke=Object(o.b)((function(e){return{reviews:e.review.review,user:e.user.loggedInUser}}),ye)(we),Oe=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={review:{},editMode:!1},e.onDeleteGuideReview=function(){e.props.removeReview(e.props.review._id),e.props.getReviewToShow()},e.reviewEditMode=function(){e.state.editMode?e.setState({editMode:!1}):e.setState({editMode:!0})},e.onEdit=function(a){a.preventDefault();var t=e.state;console.log(e.state),e.props.editReview(t)},e.handledChange=function(a){var t=a.target,n=t.name,r=t.value;e.setState((function(e){return{review:Object(c.a)(Object(c.a)({},e.review),{},Object(ue.a)({},n,r))}}),(function(){console.log(e.state.review)}))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({review:this.props.review},(function(){}))}},{key:"render",value:function(){var e=this,a=this.props.review?this.props.review.by.fullName:null,t=this.state.review,n=t.txt,i=t.rate,s=t.title;return r.a.createElement("section",{className:"review-container"},this.state.review&&this.state.editMode?r.a.createElement("form",{className:"",onSubmit:this.onEdit},r.a.createElement("span",null,"title")," ",r.a.createElement("input",{type:"text",name:"title",value:s,onChange:this.handledChange}),r.a.createElement("br",null),r.a.createElement("textarea",{name:"txt",value:n,onChange:this.handledChange,cols:"30",rows:"10",placeholder:"What do you think about me?",required:!0}),r.a.createElement("button",{className:"review-button review-edit-button",onClick:function(){e.reviewEditMode()}},"Edit")):r.a.createElement("div",{className:"review"},r.a.createElement("div",{className:"review-info"},r.a.createElement("p",{className:"review-info-row review-info-title-row"},r.a.createElement("span",{className:"review-info-heading"},"Title:"),s),r.a.createElement("p",{className:"review-info-row"},r.a.createElement("span",{className:"review-info-heading"},"By:"),a),r.a.createElement("p",{className:"review-info-row"},r.a.createElement("span",{className:"review-info-heading"},"Rating:"),r.a.createElement(P.a,{className:"guide-preview-rating",start:0,stop:5,initialRating:i,emptySymbol:r.a.createElement("img",{className:"trail-preview-full-star",src:q.a}),fullSymbol:r.a.createElement("img",{className:"trail-preview-star",src:Y.a}),readonly:!0}))),r.a.createElement("p",{className:"review-text"},n),r.a.createElement("div",{className:"review-buttons"},r.a.createElement("button",{className:"review-button review-delete-button",onClick:function(){e.onDeleteGuideReview()}},"Delete"),r.a.createElement("button",{className:"review-button review-edit-button",onClick:function(){e.reviewEditMode()}},"Edit"))))}}]),t}(n.Component),je={removeReview:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pe.remove(e);case 2:t(Ne(e));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},editReview:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,pe.edit(e.review);case 3:n=a.sent,t({type:"EDIT",review:{currReview:n}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("error",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},Se=Object(o.b)((function(e){return{reviews:e.review.reviews}}),je)(Oe),Ce=function(e){return r.a.createElement("section",{className:"review-list"},e.reviews.map((function(a){return r.a.createElement(Se,{key:a._id,review:a,getReviewToShow:e.getReviewToShow})})))},Te=t(51),xe=(t(82),{query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a="?";e.guideId?a+="guideId=".concat(e.guideId):e.userId&&(a+="userId=".concat(e.userId));return k("order"+a)},save:function(e){if(e._id)return j("".concat("order","/").concat(e._id),e);return O("".concat("order"),e)},remove:function(e){return S("".concat("order","/").concat(e))},getById:function(e){return k("".concat("order","/").concat(e))}});t(49);var Ie=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={bookForm:{trailIdx:e.props.trailIdx,peopleCount:1,date:new Date}},e.handelInput=function(a){var t=a.target.name,n="number"===a.target.type?parseInt(a.target.value,10):a.target.value;e.setState((function(e){return{bookForm:Object(c.a)(Object(c.a)({},e.bookForm),{},Object(ue.a)({},t,n))}}),(function(){console.log("state:",e.state)}))},e.handelTrailIdx=function(a){e.props.setTrailIdx(a),e.handelInput(a)},e.handelDate=function(a){e.setState((function(e){return{bookForm:Object(c.a)(Object(c.a)({},e.bookForm),{},{date:a})}}))},e.onBook=function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=e.getNewOrder(),a.next=4,xe.save(n);case 4:n=a.sent,w.push("/profile/".concat(n.buyerUser._id));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(m.a)(t,[{key:"getNewOrder",value:function(){var e=this.props.guide,a=this.state.bookForm,t=a.peopleCount,n=a.date,r=a.trailIdx,i={peopleCount:t,trailAt:Date.parse(n),isConfirmed:!1,isCanceled:!1};i.buyerUser=this.props.loggedInUser,i.buyerUser.isDeleted=!1,i.guide=x.getMiniUserObj(this.props.guide),i.guide.isDeleted=!1;var s=e.trails[r];return i.trail=Z.getMiniTrailObj(s),i.price=e.price,i}},{key:"render",value:function(){var e=this,a=this.props.guide,t=this.state.bookForm;return r.a.createElement("form",{className:"booking-form",onSubmit:this.onBook},r.a.createElement("select",{className:"booking-form-selected-trail",name:"trailIdx",onChange:this.handelTrailIdx,value:t.trailSelected},a.trails.map((function(e,a){return r.a.createElement("option",{key:e._id,value:a},e.name)}))),r.a.createElement(Te.a,{onChange:function(a){e.handelDate(a)},value:t.date,minDate:new Date}),r.a.createElement("div",{className:"booking-form-people-count-container"},r.a.createElement("label",{className:"booking-form-title"},"How many people?"),r.a.createElement("input",{className:"booking-form-people-count",type:"number",name:"peopleCount",value:t.peopleCount,min:"1",onChange:this.handelInput})),r.a.createElement("div",null,r.a.createElement("div",{className:"booking-form-price-container"},r.a.createElement("label",{className:"booking-form-title"},"Price:"),r.a.createElement("span",{className:"price"},"$",t.peopleCount*a.price)),r.a.createElement("button",{type:"submit",className:"booking-form-submit-button"},"Book")))}}]),t}(n.Component),De=Object(o.b)((function(e){return{currTrail:e.trail.selectedTrail,loggedInUser:e.user.loggedInUser}}),{})(Ie),_e=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={guide:"",trailIdx:0,reviewsToShow:[]},e.getReviewToShow=Object(f.a)(g.a.mark((function a(){var t,n,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.match.params.id,a.next=3,e.props.loadReviews({guideId:t});case 3:n=a.sent,r=n.filter((function(e){return e.type.guide})).filter((function(e){return e.type.guide._id===t})),e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{reviewsToShow:r})}));case 6:case"end":return a.stop()}}),a)}))),e.setCurrTrailIdx=function(a){if(a){var t=e.state.guide.trails.findIndex((function(e){return e._id===a._id}));-1!==t&&e.setState({trailIdx:t})}},e.setTrailIdx=function(a){var t=a.target.name,n=parseInt(a.target.value,10);e.setState(Object(ue.a)({},t,n))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark((function e(){var a,t,n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,x.getById(a);case 3:t=e.sent,n=this.props.currTrail,this.setState({guide:t},(function(){r.setCurrTrailIdx(n)})),this.getReviewToShow();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.guide,t=e.trailIdx,n=e.reviewsToShow;return r.a.createElement("main",{className:"booking-page"},a&&r.a.createElement("div",{className:"booking-page-container"},r.a.createElement("section",{className:"booking-page-content"},r.a.createElement("div",{className:"booking-page-details"},r.a.createElement("img",{className:"booking-page-avatar",alt:a.fullName,src:a.imgUrl,width:"75px"}),r.a.createElement("p",{className:"booking-page-full-name"},a.fullName),r.a.createElement("p",{className:"booking-page-rate-box"},r.a.createElement("span",{className:"pra-rating"},"Rating:"),r.a.createElement(P.a,{start:0,stop:5,initialRating:a.rating,emptySymbol:r.a.createElement("img",{src:q.a,alt:"star",width:"16"}),fullSymbol:r.a.createElement("img",{src:Y.a,alt:"full-star",width:"16"}),readonly:!0}),r.a.createElement("span",{className:"total-rating"},"(",a.reviewers_count,")")),r.a.createElement("div",null,r.a.createElement("span",{className:"booking-page-title"},"Languages:"),r.a.createElement("span",null,a.languages.map(de).join(", "))),r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement("p",{className:"booking-page-description"},"I\u2019ve traveled to over 100 countries and territories, traveled hundreds of thousands of miles, slept in over a thousand hostels, tried weird food (including fried maggots), made lifelong friends, learned multiple languages, and, most importantly, made it my mission now to help travelers like YOURSELF to realize YOUR travel dreams the same way those five backpackers helped me realize mine.")),r.a.createElement("img",{className:"booking-page-img-trail",src:a.trails[t].imgUrls[0]}))),r.a.createElement("section",{className:"booking-page-add-review"},r.a.createElement("p",{className:"title"},"Write a review about ",a.fullName),this.props.loggedInUser?r.a.createElement(ke,{guide:a,getReviewToShow:this.getReviewToShow}):r.a.createElement("div",null,r.a.createElement(v.a,{to:"/signup"},"Sign up")," or ",r.a.createElement(v.a,{to:"/login"},"Log in")," to write your review"),a&&this.state.reviewsToShow&&r.a.createElement(Ce,{reviews:n,getReviewToShow:this.getReviewToShow}))),r.a.createElement(De,{guide:a,setTrailIdx:this.setTrailIdx,trailIdx:t})))}}]),t}(n.Component),Ae={loadReviews:fe},Ue=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser,reviews:e.review.review,currTrail:e.trail.selectedTrail}}),Ae)(_e),Me=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={usersToShow:[]},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadUsers().then((function(){e.setState((function(a){return Object(c.a)(Object(c.a)({},a),{},{usersToShow:e.props.users.filter((function(e){return e.trails})).sort((function(e,a){return a.rating-e.rating}))})}))}))}},{key:"render",value:function(){var e=this.state.usersToShow;return r.a.createElement("main",{className:"guide-page"},r.a.createElement("h1",{className:"guide-page-main-heading"},"Choose your guide"),r.a.createElement($,{items:e}))}}]),t}(r.a.Component),Le={loadUsers:M},Re=Object(o.b)((function(e){return{users:e.user.users,trail:e.trail}}),Le)(Me),Fe=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={msg:"",logIn:{password:"5zxjlm9A",email:"rogeliog@gmail.com"}},e.handleChange=function(a){var t=a.target,n=t.name,r=t.value;e.setState((function(e){return{logIn:Object(c.a)(Object(c.a)({},e.logIn),{},Object(ue.a)({},n,r))}}))},e.onLogIn=function(a){a.preventDefault();var t=e.state.logIn,n={password:t.password,email:t.email};e.props.login(n),e.props.history.goBack()},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.logIn,a=e.password,t=e.email;return r.a.createElement("main",null,r.a.createElement("form",{onSubmit:this.onLogIn},r.a.createElement("input",{type:"email",name:"email",value:t,onChange:this.handleChange,placeholder:"Email",required:!0}),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange,placeholder:"Password",required:!0}),r.a.createElement("button",null,"log In")))}}]),t}(n.Component),He={login:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I.login(e);case 2:n=a.sent,t(L(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},Be=Object(o.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser}}),He)(Fe),Ge=t(29),Ke=t.n(Ge);function We(e){var a=e.order,t=e.onDelete,n=e.isGuide,i=e.orderUpdate;function s(){return a.isCanceled?"#a10b00":a.isConfirmed||a.trailAt<Date.now()?"#4CAF50":"#eb8900"}function l(){a.isCanceled=!0,i(a)}Ke.a.locale("il");var o=function(){var e={};return e.style={color:s()},e.msg=a.isCanceled?"Canceled":a.trailAt<Date.now()?"Finished":a.isConfirmed?"Confirmed":"Waiting for confirm",e.isFinished=a.trailAt<Date.now(),e}();return r.a.createElement("article",{className:"order"},r.a.createElement("header",{className:"order-header"},r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Create at"),r.a.createElement("span",null,Ke()(a.createAt).format("DD/MM/YY"))),!n&&r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Guide"),r.a.createElement("span",null,a.guide.fullName),r.a.createElement("img",{className:"order-avatar-img",src:a.guide.imgUrl})),n&&r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"By"),r.a.createElement("span",null,a.buyerUser.fullName),r.a.createElement("img",{className:"order-avatar-img",src:a.buyerUser.imgUrl}))),r.a.createElement("main",{className:"order-main"},r.a.createElement("section",{className:"order-details"},r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Trail date"),r.a.createElement("span",null,a.trail.name)),r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Trail date"),r.a.createElement("span",null,Ke()(a.trailAt).format("DD/MM/YY"))),r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"People"),r.a.createElement("span",null,a.peopleCount)),r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Price"),r.a.createElement("span",null,a.price,"$"))),r.a.createElement("section",{className:"order-status"},r.a.createElement("p",{className:"order-row"},r.a.createElement("span",{className:"order-title"},"Status"),r.a.createElement("span",{className:"order-status-msg",style:o.style},o.msg)),n&&r.a.createElement("div",{className:"order-btn-panel"},!(a.isCanceled||o.isFinished)&&(a.isConfirmed?r.a.createElement("button",{className:"order-btn order-btn-delete",onClick:l},"Cancel"):r.a.createElement("button",{className:"order-btn order-btn-confirm",onClick:function(){a.isConfirmed=!0,i(a)}},"Confirm")),(a.isCanceled||o.isFinished)&&r.a.createElement("button",{className:"order-btn order-btn-delete",onClick:function(){t(a)}},"Delete")),!n&&r.a.createElement("div",{className:"btn-panel"},a.isCanceled||o.isFinished?r.a.createElement("button",{className:"order-btn order-btn-delete",onClick:function(){t(a)}},"Delete"):r.a.createElement("button",{className:"order-btn order-btn-delete",onClick:l},"Cancel")))))}function Pe(e){var a=e.orders,t=e.orderType,n=e.loadOrders;function i(e){return s.apply(this,arguments)}function s(){return(s=Object(f.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c?a.guide.isDeleted=!0:a.buyerUser.isDeleted=!0,!a.buyerUser.isDeleted||!a.guide.isDeleted){e.next=6;break}return e.next=4,xe.remove(a._id);case 4:e.next=8;break;case 6:return e.next=8,xe.save(a);case 8:n();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return o.apply(this,arguments)}function o(){return(o=Object(f.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.save(a);case 2:n();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c="customerOrder"===t;return r.a.createElement("section",{className:"order-list"},r.a.createElement("h2",{className:"order-list-title"},c?"Customer orders":"My orders"),a&&a.map((function(e){return r.a.createElement(We,{key:e._id,order:e,onDelete:i,orderUpdate:l,isGuide:c})})))}var ze=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={user:"",orders:"",orderType:"userOrder"},e.loadOrders=Object(f.a)(g.a.mark((function a(){var t,n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t="customerOrder"===e.state.orderType?{guideId:e.state.user._id}:{userId:e.state.user._id},a.next=3,xe.query(t);case 3:n=a.sent,e.setState({orders:n});case 5:case"end":return a.stop()}}),a)}))),e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark((function e(){var a,t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,x.getById(a);case 3:t=e.sent,this.setState({user:t}),this.loadOrders();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.user,n=a.orders,i=a.orderType;return t&&r.a.createElement("main",{className:"user-profile"},r.a.createElement("section",{className:"user-details"},r.a.createElement("img",{className:"user-profile-img",src:t.imgUrl,alt:t.fullName}),r.a.createElement("h2",{className:"user-profile-name"},t.fullName),r.a.createElement("p",{className:"user-profile-row"},r.a.createElement("span",{className:"user-profile-title"},"Username"),r.a.createElement("span",null,t.userName)),r.a.createElement("p",{className:"user-profile-row"},r.a.createElement("span",{className:"user-profile-title"},"Email"),r.a.createElement("span",null,t.email)),r.a.createElement("div",{className:"btns-panel"},r.a.createElement("button",{className:"user-profile-btn",onClick:function(){e.setState({orderType:"userOrder"},e.loadOrders)}},"My orders"),r.a.createElement("button",{className:"user-profile-btn",onClick:function(){e.setState({orderType:"customerOrder"},e.loadOrders)}},"Customer orders"))),n&&r.a.createElement(Pe,{orders:n,orderType:i,loadOrders:this.loadOrders}))}}]),t}(n.Component),qe=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),{})(ze),Ve=t(25),Ye=[{stylers:[{hue:"#bbff00"},{weight:.5},{gamma:.5}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",stylers:[{color:"#a4cc48"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:1}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"simplified"},{gamma:1.14},{saturation:-18}]},{featureType:"road.highway.controlled_access",elementType:"labels",stylers:[{saturation:30},{gamma:.76}]},{featureType:"road.local",stylers:[{visibility:"simplified"},{weight:.4},{lightness:-8}]},{featureType:"water",stylers:[{color:"#4aaecc"}]},{featureType:"landscape.man_made",stylers:[{color:"#718e32"}]},{featureType:"poi.business",stylers:[{saturation:68},{lightness:-61}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{weight:2.7},{color:"#f4f9e8"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{weight:1.5},{color:"#e53013"},{saturation:-42},{lightness:28}]}],Je=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},lat:0,lng:0,fromAdd:!1},e.onMarkerClick=function(a,t,n){return e.setState({selectedPlace:a,activeMarker:t,showingInfoWindow:!0})},e.updateLatLng=function(a,t){e.props.updateLatLng(a,t)},e.onMapClicked=function(a,t,n){if(e.state.fromAdd){var r=n.latLng.lat(),i=n.latLng.lng();e.updateLatLng(r,i),e.state.showingInfoWindow&&e.setState({showingInfoWindow:!1,activeMarker:null})}},e.updateLatLng=function(a,t){e.props.updateLatLng(a,t)},e.onMapClicked=function(a,t,n){if(e.state.fromAdd){var r=n.latLng.lat(),i=n.latLng.lng();e.updateLatLng(r,i),e.setState({lat:r,lng:i}),e.state.showingInfoWindow&&e.setState({showingInfoWindow:!1,activeMarker:null})}},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){"/trail/add"===w.location.pathname&&this.setState({fromAdd:!0})}},{key:"render",value:function(){return r.a.createElement(Ve.Map,{styles:Ye,zoom:10,google:this.props.google,initialCenter:this.props.location?{lat:this.props.location.lat,lng:this.props.location.lng}:{lat:41,lng:24},onClick:this.onMapClicked},this.state.lat?r.a.createElement(Ve.Marker,{onClick:this.onMarkerClick,position:{lat:this.state.lat,lng:this.state.lng},name:"Current location"}):r.a.createElement(Ve.Marker,{onClick:this.onMarkerClick,name:"Current location"}),r.a.createElement(Ve.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h1",null,this.state.selectedPlace.name))))}}]),t}(n.Component),Xe=Object(Ve.GoogleApiWrapper)({apiKey:"AIzaSyDw7z6CMCiRYFpFmT4LIk7JWqyqvSWm1R8"})(Je),$e=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={isEditMode:!1,usersToShow:null,reviews:[]},e.getReviewToShow=Object(f.a)(g.a.mark((function a(){var t,n,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.match.params.id,a.next=3,e.props.loadReviews({trailId:t});case 3:(n=a.sent)&&(r=n.filter((function(e){return e.type.trail})).filter((function(e){return e.type.trail._id===t})),e.setState({reviews:r}));case 5:case"end":return a.stop()}}),a)}))),e.inputHandler=function(a){var t=a.target,n=t.name,r=t.value;e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{selectedTrail:Object(c.a)(Object(c.a)({},e.selectedTrail),{},Object(ue.a)({},n,r))})}))},e.onEditHandler=function(){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{isEditMode:!0})})),console.log(e.state)},e.onFinishEditHandler=function(a){a.preventDefault(),e.setState({isEditMode:!1});var t=e.state.selectedTrail;e.props.editTrail(t).then((function(){e.props.loadTrails()}))},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark((function e(){var a,t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.loadUsers(),a=this.props.match.params.id,this.props.loadTrail(a).then((function(){t.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{selectedTrail:t.props.trail.selectedTrail,usersToShow:t.props.users.filter((function(e){return!!e.trails&&e.trails.some((function(e){return e._id===t.props.trail.selectedTrail.id}))})).sort((function(e,a){return a.rating-e.rating}))})}))})),this.getReviewToShow();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.isEditMode){var a=this.state.selectedTrail,t=a.name,n=a.country,i=a.difficulty,s=a.distance,l=a.days,o=a.imgUrls,c=a.descriptions;return r.a.createElement("div",{className:""},r.a.createElement("form",{className:"trail-details-edit-form",onSubmit:this.onFinishEditHandler},r.a.createElement("label",null,"name:",r.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.inputHandler})),r.a.createElement("label",null,"country: ",r.a.createElement("input",{className:"",type:"text",value:n,name:"country",onChange:this.inputHandler})),r.a.createElement("label",null,"distance: ",r.a.createElement("input",{className:"",type:"text",value:s,name:"distance",onChange:this.inputHandler})),r.a.createElement("label",null,"difficulty:",r.a.createElement("select",{name:"difficulty",value:i,onChange:this.inputHandler},r.a.createElement("option",{value:"Beginner"},"Beginner"),r.a.createElement("option",{value:"Advanced"},"Advanced"),r.a.createElement("option",{value:"Expect"},"Expect"))),r.a.createElement("label",null,"days: ",r.a.createElement("input",{type:"number",value:l,name:"days",onChange:this.inputHandler})),r.a.createElement("label",null,"imgs: ",r.a.createElement("input",{type:"text",value:o,name:"imgUrls",onChange:this.inputHandler})),r.a.createElement("br",null),r.a.createElement("label",null,"descriptions: ",r.a.createElement("textarea",{cols:"80",rows:"30",value:c,name:"descriptions",onChange:this.inputHandler})),r.a.createElement("button",{className:""},"Finish Edit")))}var u=this.state,m=u.selectedTrail,d=u.usersToShow,p=u.reviews;return r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("main",{className:"trail-details"},r.a.createElement("div",{className:"trail-details-main-image",style:{backgroundImage:"url(".concat(m.imgUrls[0],")")}},r.a.createElement("h1",{className:"trail-details-main-header"},m.name)),r.a.createElement("section",{className:"trail-details-container"},r.a.createElement("h2",{className:"trail-details-info-header"},"Check guides for this trail"),r.a.createElement("div",{className:"trail-details-guides-list"},d&&d.map((function(e){return r.a.createElement(X,{key:e._id,guide:e})}))),r.a.createElement("section",{className:"trail-details-info"},r.a.createElement("div",{className:"trail-details-info-main"},r.a.createElement("h2",{className:"trail-details-info-header"},"Trail info"),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Description: "),m.descriptions),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Country: "),m.country),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Difficulty: "),m.difficulty),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Days: "),m.days),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Distance: "),m.distance),r.a.createElement("p",null,r.a.createElement("span",{className:"trail-details-info-heading"},"Rating: "),m.rating),r.a.createElement("div",{className:"trail-details-images"},m.imgUrls.map((function(e,a){return r.a.createElement("img",{key:a,className:"trail-details-image",alt:m.name,src:m.imgUrls[a]})})))),r.a.createElement("div",{className:"trail-details-info-aside"},r.a.createElement("h2",{className:"trail-details-info-header"},"Trail location"),r.a.createElement("div",{className:"trail-details-map-container"},r.a.createElement(Xe,{location:m.location})),r.a.createElement("h2",{className:"trail-details-info-header"},"Add review"),this.props.loggedInUser?r.a.createElement(ke,{getReviewToShow:this.getReviewToShow,trail:this.state.selectedTrail}):r.a.createElement("div",null,r.a.createElement(v.a,{to:"/signup"},"Sign up")," or ",r.a.createElement(v.a,{to:"/login"},"Log in")," to write your review"),r.a.createElement("h2",{className:"trail-details-info-header no-padding-start"},"Trail reviews"),r.a.createElement(Ce,{reviews:p,getReviewToShow:this.getReviewToShow})))),this.props.loggedInUser&&this.props.loggedInUser.isAdmin&&r.a.createElement("section",{className:"trail-details-controls"},r.a.createElement(v.a,{className:"trail-details-button trail-details-back-button",to:"/trail"}," Back to List "),r.a.createElement("button",{className:"trail-details-button trail-details-edit-button",onClick:function(){e.onEditHandler()}},"Edit trail"),r.a.createElement("button",{className:"trail-details-button trail-details-remove-button",onClick:function(){e.props.removeTrail(m._id).then((function(){return w.push("/trail")}))}},"Delete Trail")),r.a.createElement("section",null)))}}]),t}(r.a.Component),Ze={loadUsers:M,loadTrail:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Z.getById(e);case 3:n=a.sent,t({type:"SET_TRAIL",trail:n}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("ops",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},loadTrails:ae,removeTrail:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Z.remove(e);case 2:t(ne(e));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},editTrail:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Z.edit(e);case 3:n=a.sent,t({type:"EDIT",trail:{currTrail:n}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("error",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},loadReviews:fe},Qe=Object(o.b)((function(e){return{loggedInUser:e.user.loggedInUser,users:e.user.users,trail:e.trail,isLoading:e.loading.isLoading,reviews:e.review}}),Ze)($e),ea=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={name:"",country:"",difficulty:"",distance:"",days:"",location:{lat:0,lng:0},imgUrls:[],descriptions:"",createdAt:Date.now()},e.updateLatLng=function(a,t){e.setState({location:{lat:a,lng:t}},console.log(e.state))},e.inputHandler=function(a){var t=a.target,n=t.name,r=t.value;"imgUrls"===n&&(r=r.split(",")),e.setState(Object(ue.a)({},n,r))},e.getLocation=function(a){var t=a.target,n=t.name,r=t.value;e.setState((function(e){return{location:Object(c.a)(Object(c.a)({},e.location),{},Object(ue.a)({},n,r))}}))},e.resetForm=function(){e.setState({name:"",country:"",difficulty:"",distance:"",days:"",location:{lat:0,lng:0},imgUrls:[],createdAt:Date.now()})},e.handleSubmit=function(a){a.preventDefault();var t=e.state;e.props.saveTrail(t).then((function(){e.props.loadTrails()})),e.resetForm()},e}return Object(m.a)(t,[{key:"render",value:function(){var e=this.state,a=e.name,t=e.country,n=e.difficulty,i=e.days,s=e.distance,l=e.imgUrls,o=e.descriptions,c=this.state.location,u=c.lat,m=c.lng;return r.a.createElement("main",{className:""},r.a.createElement("h2",null,"Add a trail"),r.a.createElement("form",{className:"trail-add-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"trail-add-container"},r.a.createElement("div",{className:"add-right-container"},r.a.createElement("div",{className:"add-set"},r.a.createElement("label",null,"name:",r.a.createElement("input",{type:"text",name:"name",value:a,onChange:this.inputHandler})),r.a.createElement("label",null,"country: ",r.a.createElement("input",{className:"",type:"text",value:t,name:"country",onChange:this.inputHandler})),r.a.createElement("label",null,"distance: ",r.a.createElement("input",{className:"",type:"text",value:s,name:"distance",onChange:this.inputHandler}))),r.a.createElement("div",{className:"add-set"},r.a.createElement("label",null,"difficulty:",r.a.createElement("select",{name:"difficulty",value:n,onChange:this.inputHandler},r.a.createElement("option",{value:"Beginner"},"Beginner"),r.a.createElement("option",{value:"Advanced"},"Advanced"),r.a.createElement("option",{value:"Expect"},"Expect"))),r.a.createElement("label",null,"days: ",r.a.createElement("input",{type:"number",value:i,name:"days",onChange:this.inputHandler})),r.a.createElement("label",null,"imgs: ",r.a.createElement("input",{type:"text",value:l,name:"imgUrls",onChange:this.inputHandler}))),r.a.createElement("div",{className:"add-set"},r.a.createElement("label",null,"lat: ",r.a.createElement("input",{type:"number",value:u,name:"lat",onChange:this.getLocation})),r.a.createElement("label",null,"lng: ",r.a.createElement("input",{type:"number",value:m,name:"lng",onChange:this.getLocation}))),r.a.createElement("br",null),r.a.createElement("label",null,"descriptions:",r.a.createElement("br",null),r.a.createElement("textarea",{cols:"80",rows:"30",value:o,name:"descriptions",onChange:this.inputHandler})),r.a.createElement("button",{className:""},"Add"))),r.a.createElement(Xe,{updateLatLng:this.updateLatLng})))}}]),t}(r.a.Component),aa={saveTrail:function(e){return function(){var a=Object(f.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Z.add(e);case 3:n=a.sent,t({type:"ADD",trail:Object(c.a)({},n)}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("error",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},loadTrails:ae},ta=Object(o.b)((function(e){return{trails:e.trail.trails}}),aa)(ea);var na=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(K,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/profile/:id",component:qe}),r.a.createElement(l.a,{path:"/login",component:Be}),r.a.createElement(l.a,{path:"/booking/:id",component:Ue}),r.a.createElement(l.a,{path:"/trail/add",component:ta}),r.a.createElement(l.a,{path:"/trail/:id",component:Qe}),r.a.createElement(l.a,{path:"/trail",component:ce}),r.a.createElement(l.a,{exact:!0,path:"/guide",component:Re}),r.a.createElement(l.a,{exact:!0,path:"/",component:se})),r.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ra=t(22),ia=t(50),sa=t(28),la=null;sessionStorage.user&&(la=JSON.parse(sessionStorage.user));var oa={users:[],loggedInUser:la},ca={trails:[],selectedTrail:null},ua={review:[],selectedReview:null},ma={isLoading:!1},da=Object(ra.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"SET_USERS":return Object(c.a)(Object(c.a)({},e),{},{users:a.users});case"SET_USER":return Object(c.a)(Object(c.a)({},e),{},{loggedInUser:a.user});case"UPDATE_USER":return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e._id===a.user._id?a.user:e}))});case"ADD_USER":return Object(c.a)(Object(c.a)({},e),{},{users:[].concat(Object(sa.a)(e.user),[a.user])});case"USER_REMOVE":return Object(c.a)(Object(c.a)({},e),{},{users:e.users.filter((function(e){return e._id!==a.userId}))});default:return e}},trail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"ADD":return Object(c.a)(Object(c.a)({},e),{},{trails:e.trails.map((function(e){return e._id===a.trail._id?a.trail:e}))});case"EDIT":return Object(c.a)(Object(c.a)({},e),{},{trails:e.trails.map((function(e){return e._id===a.trail._id?a.trail:(a.trail.currTrail.isEditMode=!1,e)}))});case"DELETE":return Object(c.a)(Object(c.a)({},e),{},{trails:e.trails.filter((function(e){return e._id!==a.trailId}))});case"SET_TRAILS":return Object(c.a)(Object(c.a)({},e),{},{trails:a.trails});case"SET_TRAIL":return Object(c.a)(Object(c.a)({},e),{},{selectedTrail:a.trail});default:return e}},review:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"ADD":return Object(c.a)(Object(c.a)({},e),{},{selectedReview:a.review,review:[].concat(Object(sa.a)(e.review),[a.review])});case"EDIT":return Object(c.a)(Object(c.a)({},e),{},{review:e.review.map((function(e){return e._id===a.review._id?a.review:(a.review.isEditMode=!1,e)}))});case"DELETE":return console.log(e),Object(c.a)(Object(c.a)({},e),{},{review:e.review.filter((function(e){return e.id!==a.reviewId}))});case"SET_REVIEWS":return Object(c.a)(Object(c.a)({},e),{},{review:a.review});case"SET_REVIEW":return Object(c.a)(Object(c.a)({},e),{},{selectedReview:a.review});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"LOADING_START":return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1});default:return e}}}),pa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ra.d,va=Object(ra.e)(da,pa(Object(ra.a)(ia.a))),ha=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return null}}]),t}(r.a.Component),ga=Object(l.f)(ha);s.a.render(r.a.createElement(o.a,{store:va},r.a.createElement(l.b,{history:w},r.a.createElement(ga,null),r.a.createElement(na,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.c5d6c617.chunk.js.map